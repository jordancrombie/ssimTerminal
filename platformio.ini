; PlatformIO Configuration for ssimTerminal
; Supports multiple Waveshare ESP32-S3 terminal devices

; =============================================================================
; Common settings shared by all environments
; =============================================================================
[common]
platform = https://github.com/pioarduino/platform-espressif32/releases/download/stable/platform-espressif32.zip
framework = arduino
board = esp32-s3-devkitc-1

; ESP32-S3 specific settings
board_build.mcu = esp32s3
board_build.f_cpu = 240000000L

; Flash configuration (16MB Flash, 8MB PSRAM)
board_build.flash_mode = qio
board_build.flash_size = 16MB
board_build.partitions = default_16MB.csv
board_build.arduino.memory_type = qio_opi

; Common build flags
build_flags =
    -DBOARD_HAS_PSRAM
    -DARDUINO_USB_MODE=1
    -DARDUINO_USB_CDC_ON_BOOT=1
    -DLV_CONF_INCLUDE_SIMPLE
    -DLV_CONF_PATH="${PROJECT_DIR}/include/lv_conf.h"
    -DCORE_DEBUG_LEVEL=3

; Common libraries
lib_deps =
    lvgl/lvgl@^8.3.11
    links2004/WebSockets@^2.4.1
    ricmoo/QRCode@^0.0.1
    bblanchon/ArduinoJson@^7.0.0

; Monitor settings
monitor_speed = 115200
monitor_filters = esp32_exception_decoder

; Upload settings
upload_speed = 921600

; Build settings
build_type = debug

; =============================================================================
; Waveshare ESP32-S3-Touch-AMOLED-1.8 (368x448 AMOLED, FT3168 touch, AXP2101 PMU)
; =============================================================================
[env:amoled-1_8]
extends = common
build_flags =
    ${common.build_flags}
    -DBOARD_WAVESHARE_AMOLED_1_8
lib_deps =
    ${common.lib_deps}
    ; AXP2101 PMU control (only on AMOLED board)
    lewisxhe/XPowersLib@^0.2.6

; =============================================================================
; Waveshare ESP32-S3-Touch-LCD-7 (800x480 RGB LCD, GT911 touch, no I2C PMU)
; =============================================================================
[env:lcd-7]
extends = common
build_flags =
    ${common.build_flags}
    -DBOARD_WAVESHARE_LCD_7
lib_deps =
    ${common.lib_deps}
    ; No XPowersLib needed - CS8501 PMU has no I2C interface

; =============================================================================
; Waveshare ESP32-S3-Touch-LCD-1.85C-BOX (360x360 round QSPI, CST816 touch)
; =============================================================================
[env:lcd-1_85c_box]
extends = common
build_flags =
    ${common.build_flags}
    -DBOARD_WAVESHARE_LCD_1_85C_BOX
lib_deps =
    ${common.lib_deps}
    ; No XPowersLib needed - MP1605GTF-Z PMU has no I2C interface

; =============================================================================
; Legacy environment name (alias for amoled-1_8)
; =============================================================================
[env:esp32s3]
extends = env:amoled-1_8
